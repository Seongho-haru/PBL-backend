{
  "info": {
    "_postman_id": "pbl-api-test-collection-fixed",
    "name": "PBL Backend API Test Collection (Fixed)",
    "description": "ê°•ì˜/ì»¤ë¦¬í˜ëŸ¼ ëª¨ë“ˆì˜ ëª¨ë“  APIë¥¼ í…ŒìŠ¤íŠ¸í•˜ëŠ” ì»¬ë ‰ì…˜ - ê¸°ì¡´ ë°ì´í„° ê³ ë ¤",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:2358",
      "type": "string"
    },
    {
      "key": "lectureId1",
      "value": "1",
      "type": "string"
    },
    {
      "key": "lectureId2",
      "value": "2",
      "type": "string"
    },
    {
      "key": "lectureId3",
      "value": "3",
      "type": "string"
    },
    {
      "key": "newLectureId",
      "value": "",
      "type": "string"
    },
    {
      "key": "curriculumId",
      "value": "",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "ğŸ“š Lecture API Tests",
      "item": [
        {
          "name": "1. ê¸°ì¡´ ê°•ì˜ ì¡°íšŒ (ID=1)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response has lecture data\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('id');",
                  "    pm.expect(jsonData.id).to.eql(1);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/lectures/1",
              "host": ["{{baseUrl}}"],
              "path": ["api", "lectures", "1"]
            }
          }
        },
        {
          "name": "2. ìƒˆ ë§ˆí¬ë‹¤ìš´ ê°•ì˜ ìƒì„±",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response has lecture data\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('id');",
                  "    pm.expect(jsonData.type).to.eql('MARKDOWN');",
                  "    pm.collectionVariables.set('newLectureId', jsonData.id);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Vue.js ê¸°ì´ˆ ê°•ì˜\",\n  \"description\": \"# Vue.js ì…ë¬¸\\n\\nVue.jsì˜ ê¸°ë³¸ ê°œë…ì„ ë°°ì›Œë´…ì‹œë‹¤.\",\n  \"type\": \"MARKDOWN\",\n  \"category\": \"Frontend\",\n  \"difficulty\": \"ê¸°ì´ˆ\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/lectures",
              "host": ["{{baseUrl}}"],
              "path": ["api", "lectures"]
            }
          }
        },
        {
          "name": "3. ëª¨ë“  ê°•ì˜ ì¡°íšŒ",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response is array\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.be.an('array');",
                  "    pm.expect(jsonData.length).to.be.at.least(4);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/lectures",
              "host": ["{{baseUrl}}"],
              "path": ["api", "lectures"]
            }
          }
        },
        {
          "name": "4. ê°•ì˜ ê²€ìƒ‰ (ìˆ˜ì •ëœ íŒŒë¼ë¯¸í„°)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Search results contain lectures\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('lectures');",
                  "    pm.expect(jsonData.lectures).to.be.an('array');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/lectures/search?title=Vue",
              "host": ["{{baseUrl}}"],
              "path": ["api", "lectures", "search"],
              "query": [
                {
                  "key": "title",
                  "value": "Vue"
                }
              ]
            }
          }
        },
        {
          "name": "5. ê°•ì˜ ê³µê°œ",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Success message\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.message).to.include('ê³µê°œ');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/lectures/{{newLectureId}}/publish",
              "host": ["{{baseUrl}}"],
              "path": ["api", "lectures", "{{newLectureId}}", "publish"]
            }
          }
        },
        {
          "name": "6. ê³µê°œ ê°•ì˜ ì¡°íšŒ",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Public lectures returned\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.be.an('array');",
                  "    if (jsonData.length > 0) {",
                  "        pm.expect(jsonData[0]).to.have.property('isPublic', true);",
                  "    }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/lectures/public",
              "host": ["{{baseUrl}}"],
              "path": ["api", "lectures", "public"]
            }
          }
        },
        {
          "name": "7. ê³µê°œ ê°•ì˜ ê²€ìƒ‰ (ìˆ˜ì •ëœ íŒŒë¼ë¯¸í„°)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Search results returned\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.be.an('array');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/lectures/public/search?category=Frontend&type=MARKDOWN",
              "host": ["{{baseUrl}}"],
              "path": ["api", "lectures", "public", "search"],
              "query": [
                {
                  "key": "category",
                  "value": "Frontend"
                },
                {
                  "key": "type",
                  "value": "MARKDOWN"
                }
              ]
            }
          }
        },
        {
          "name": "8. ê°•ì˜ í†µê³„ ì¡°íšŒ",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Stats have required fields\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('byType');",
                  "    pm.expect(jsonData).to.have.property('byCategory');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/lectures/stats",
              "host": ["{{baseUrl}}"],
              "path": ["api", "lectures", "stats"]
            }
          }
        }
      ]
    },
    {
      "name": "ğŸ“š Curriculum API Tests",
      "item": [
        {
          "name": "1. ì»¤ë¦¬í˜ëŸ¼ ìƒì„±",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response has curriculum data\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('id');",
                  "    pm.expect(jsonData.title).to.eql('ì›¹ ê°œë°œ ë§ˆìŠ¤í„° ê³¼ì •');",
                  "    pm.collectionVariables.set('curriculumId', jsonData.id);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"ì›¹ ê°œë°œ ë§ˆìŠ¤í„° ê³¼ì •\",\n  \"description\": \"í”„ë¡ íŠ¸ì—”ë“œë¶€í„° ë°±ì—”ë“œê¹Œì§€ ì „ì²´ ì›¹ ê°œë°œ í•™ìŠµ ê³¼ì •\",\n  \"isPublic\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/curriculums",
              "host": ["{{baseUrl}}"],
              "path": ["api", "curriculums"]
            }
          }
        },
        {
          "name": "2. ì»¤ë¦¬í˜ëŸ¼ì— ê°•ì˜ ì¶”ê°€ (ê¸°ì¡´ ê°•ì˜ 1)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Success message\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.message).to.include('ì¶”ê°€');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"lectureId\": {{lectureId1}},\n  \"isRequired\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/curriculums/{{curriculumId}}/lectures",
              "host": ["{{baseUrl}}"],
              "path": ["api", "curriculums", "{{curriculumId}}", "lectures"]
            }
          }
        },
        {
          "name": "3. ì»¤ë¦¬í˜ëŸ¼ì— ê°•ì˜ ì¶”ê°€ (ê¸°ì¡´ ê°•ì˜ 2)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Success message\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.message).to.include('ì¶”ê°€');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"lectureId\": {{lectureId2}},\n  \"isRequired\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/curriculums/{{curriculumId}}/lectures",
              "host": ["{{baseUrl}}"],
              "path": ["api", "curriculums", "{{curriculumId}}", "lectures"]
            }
          }
        },
        {
          "name": "4. ì»¤ë¦¬í˜ëŸ¼ì— ê°•ì˜ ì¶”ê°€ (ìƒˆ ê°•ì˜)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Success message\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.message).to.include('ì¶”ê°€');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"lectureId\": {{newLectureId}},\n  \"isRequired\": false\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/curriculums/{{curriculumId}}/lectures",
              "host": ["{{baseUrl}}"],
              "path": ["api", "curriculums", "{{curriculumId}}", "lectures"]
            }
          }
        },
        {
          "name": "5. ì»¤ë¦¬í˜ëŸ¼ ìƒì„¸ ì¡°íšŒ",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Curriculum has lectures\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('lectures');",
                  "    pm.expect(jsonData.lectures).to.be.an('array');",
                  "    pm.expect(jsonData.lectures.length).to.eql(3);",
                  "    pm.expect(jsonData.totalLectureCount).to.eql(3);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/curriculums/{{curriculumId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "curriculums", "{{curriculumId}}"]
            }
          }
        },
        {
          "name": "6. ğŸ”¥ ê°•ì˜ ìˆœì„œ ë³€ê²½ (í•µì‹¬ í…ŒìŠ¤íŠ¸!)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Success message\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.message).to.include('ìˆœì„œê°€ ì„±ê³µì ìœ¼ë¡œ ë³€ê²½');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"lectureIds\": [{{newLectureId}}, {{lectureId1}}, {{lectureId2}}]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/curriculums/{{curriculumId}}/lectures/reorder",
              "host": ["{{baseUrl}}"],
              "path": [
                "api",
                "curriculums",
                "{{curriculumId}}",
                "lectures",
                "reorder"
              ]
            }
          }
        },
        {
          "name": "7. ìˆœì„œ ë³€ê²½ í™•ì¸",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Lecture order was changed\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    var lectures = jsonData.lectures;",
                  "    pm.expect(lectures[0].orderIndex).to.eql(1);",
                  "    pm.expect(lectures[1].orderIndex).to.eql(2);",
                  "    pm.expect(lectures[2].orderIndex).to.eql(3);",
                  "    // ì²« ë²ˆì§¸ê°€ newLectureIdì—¬ì•¼ í•¨",
                  "    pm.expect(lectures[0].lectureId).to.eql(parseInt(pm.collectionVariables.get('newLectureId')));",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/curriculums/{{curriculumId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "curriculums", "{{curriculumId}}"]
            }
          }
        },
        {
          "name": "8. ëª¨ë“  ì»¤ë¦¬í˜ëŸ¼ ì¡°íšŒ",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response is array\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.be.an('array');",
                  "    pm.expect(jsonData.length).to.be.at.least(1);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/curriculums",
              "host": ["{{baseUrl}}"],
              "path": ["api", "curriculums"]
            }
          }
        },
        {
          "name": "9. ì»¤ë¦¬í˜ëŸ¼ ê²€ìƒ‰ (ìˆ˜ì •ëœ íŒŒë¼ë¯¸í„°)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Search results returned\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.be.an('array');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/curriculums/search?title=ì›¹",
              "host": ["{{baseUrl}}"],
              "path": ["api", "curriculums", "search"],
              "query": [
                {
                  "key": "title",
                  "value": "ì›¹"
                }
              ]
            }
          }
        },
        {
          "name": "10. ê³µê°œ ê°•ì˜ ê²€ìƒ‰ (ì»¤ë¦¬í˜ëŸ¼ìš©, ìˆ˜ì •ëœ íŒŒë¼ë¯¸í„°)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Search results returned\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.be.an('array');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/curriculums/lectures/public/search?category=Frontend&type=MARKDOWN",
              "host": ["{{baseUrl}}"],
              "path": ["api", "curriculums", "lectures", "public", "search"],
              "query": [
                {
                  "key": "category",
                  "value": "Frontend"
                },
                {
                  "key": "type",
                  "value": "MARKDOWN"
                }
              ]
            }
          }
        }
      ]
    }
  ]
}
