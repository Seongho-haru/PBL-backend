{
  "info": {
    "_postman_id": "enrollment-management-collection",
    "name": "PBL ìˆ˜ê°• ê´€ë¦¬ API",
    "description": "PBL ë°±ì—”ë“œ ìˆ˜ê°• ê´€ë¦¬ ëª¨ë“ˆ API í…ŒìŠ¤íŠ¸ ì»¬ë ‰ì…˜\n\n## ğŸ“‹ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤\n\n### 1. ìˆ˜ê°• ì‹ ì²­/ì·¨ì†Œ\n- ê³µê°œ ì»¤ë¦¬í˜ëŸ¼ ìˆ˜ê°• ì‹ ì²­\n- ì¤‘ë³µ ìˆ˜ê°• ë°©ì§€\n- ì‘ì„±ì ìˆ˜ê°• ë¶ˆê°€\n- ìˆ˜ê°• ì·¨ì†Œ\n\n### 2. ì§„ë„ ê´€ë¦¬\n- ë§ˆí¬ë‹¤ìš´ ê°•ì˜ ì½ê¸° ì™„ë£Œ\n- ë¬¸ì œ ê°•ì˜ ì •ë‹µ ì œì¶œ\n- ì§„ë„ìœ¨ ìë™ ê³„ì‚°\n\n### 3. ì¡°íšŒ ê¸°ëŠ¥\n- ì‚¬ìš©ìë³„ ìˆ˜ê°• ëª©ë¡\n- ìˆ˜ê°• ìƒì„¸ ì •ë³´\n- ìƒíƒœë³„ í•„í„°ë§\n\n### 4. í†µê³„ ê¸°ëŠ¥\n- ì»¤ë¦¬í˜ëŸ¼ë³„ ìˆ˜ê°•ì ìˆ˜\n- ì™„ë£Œì ìˆ˜ ì¡°íšŒ\n\n### 5. ê¶Œí•œ ì²´í¬\n- ë³¸ì¸ ìˆ˜ê°• ì •ë³´ë§Œ ì¡°íšŒ ê°€ëŠ¥\n- X-User-Id í—¤ë” í•„ìˆ˜",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "1. ìˆ˜ê°• ì‹ ì²­/ì·¨ì†Œ",
      "item": [
        {
          "name": "ì»¤ë¦¬í˜ëŸ¼ ìˆ˜ê°• ì‹ ì²­",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    pm.environment.set('enrollmentId', response.id);",
                  "    pm.test('ìˆ˜ê°• ì‹ ì²­ ì„±ê³µ', () => {",
                  "        pm.expect(response.id).to.be.a('number');",
                  "        pm.expect(response.status).to.eql('ENROLLED');",
                  "        pm.expect(response.progressPercentage).to.eql(0);",
                  "    });",
                  "} else {",
                  "    pm.test('ìˆ˜ê°• ì‹ ì²­ ì‹¤íŒ¨', () => {",
                  "        pm.expect(pm.response.code).to.be.oneOf([400, 409, 500]);",
                  "    });",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "X-User-Id",
                "value": "{{userId1}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"curriculumId\": {{curriculumId}}\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/enrollments",
              "host": ["{{baseUrl}}"],
              "path": ["api", "enrollments"]
            }
          },
          "response": []
        },
        {
          "name": "ì¤‘ë³µ ìˆ˜ê°• ì‹ ì²­ ì‹œë„ (ì‹¤íŒ¨)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('ì¤‘ë³µ ìˆ˜ê°• ì‹ ì²­ ì‹¤íŒ¨', () => {",
                  "    pm.expect(pm.response.code).to.eql(409);",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.error).to.include('ì´ë¯¸ ìˆ˜ê°• ì¤‘');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "X-User-Id",
                "value": "{{userId1}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"curriculumId\": {{curriculumId}}\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/enrollments",
              "host": ["{{baseUrl}}"],
              "path": ["api", "enrollments"]
            }
          },
          "response": []
        },
        {
          "name": "ìˆ˜ê°• ì·¨ì†Œ",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('ìˆ˜ê°• ì·¨ì†Œ ì„±ê³µ', () => {",
                  "    pm.expect(pm.response.code).to.eql(200);",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.message).to.include('ì·¨ì†Œ');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "X-User-Id",
                "value": "{{userId1}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/enrollments/{{enrollmentId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "enrollments", "{{enrollmentId}}"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "2. ì§„ë„ ê´€ë¦¬",
      "item": [
        {
          "name": "ë§ˆí¬ë‹¤ìš´ ê°•ì˜ ì½ê¸° ì™„ë£Œ",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('ë§ˆí¬ë‹¤ìš´ ê°•ì˜ ì½ê¸° ì™„ë£Œ', () => {",
                  "    pm.expect(pm.response.code).to.eql(200);",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.message).to.include('ì½ê¸° ì™„ë£Œ');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "X-User-Id",
                "value": "{{userId1}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/enrollments/{{enrollmentId}}/lectures/{{markdownLectureId}}/read",
              "host": ["{{baseUrl}}"],
              "path": [
                "api",
                "enrollments",
                "{{enrollmentId}}",
                "lectures",
                "{{markdownLectureId}}",
                "read"
              ]
            }
          },
          "response": []
        },
        {
          "name": "ë¬¸ì œ ê°•ì˜ ì •ë‹µ ì œì¶œ",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('ë¬¸ì œ ê°•ì˜ ì •ë‹µ ì œì¶œ', () => {",
                  "    pm.expect(pm.response.code).to.eql(200);",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.message).to.include('í•´ê²°');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "X-User-Id",
                "value": "{{userId1}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/enrollments/{{enrollmentId}}/lectures/{{problemLectureId}}/solve",
              "host": ["{{baseUrl}}"],
              "path": [
                "api",
                "enrollments",
                "{{enrollmentId}}",
                "lectures",
                "{{problemLectureId}}",
                "solve"
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "3. ì¡°íšŒ ê¸°ëŠ¥",
      "item": [
        {
          "name": "ì‚¬ìš©ìë³„ ìˆ˜ê°• ëª©ë¡ ì¡°íšŒ",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('ì‚¬ìš©ì ìˆ˜ê°• ëª©ë¡ ì¡°íšŒ ì„±ê³µ', () => {",
                  "    pm.expect(pm.response.code).to.eql(200);",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.be.an('array');",
                  "    if (response.length > 0) {",
                  "        pm.expect(response[0]).to.have.property('id');",
                  "        pm.expect(response[0]).to.have.property('status');",
                  "        pm.expect(response[0]).to.have.property('progressPercentage');",
                  "    }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-User-Id",
                "value": "{{userId1}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/enrollments/user/{{userId1}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "enrollments", "user", "{{userId1}}"]
            }
          },
          "response": []
        },
        {
          "name": "ìˆ˜ê°• ìƒíƒœë³„ ëª©ë¡ ì¡°íšŒ (ìˆ˜ê°•ì¤‘)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('ìˆ˜ê°•ì¤‘ ëª©ë¡ ì¡°íšŒ ì„±ê³µ', () => {",
                  "    pm.expect(pm.response.code).to.eql(200);",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.be.an('array');",
                  "    response.forEach(item => {",
                  "        pm.expect(item.status).to.eql('ENROLLED');",
                  "    });",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-User-Id",
                "value": "{{userId1}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/enrollments/user/{{userId1}}?status=ENROLLED",
              "host": ["{{baseUrl}}"],
              "path": ["api", "enrollments", "user", "{{userId1}}"],
              "query": [
                {
                  "key": "status",
                  "value": "ENROLLED"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "ìˆ˜ê°• ìƒì„¸ ì •ë³´ ì¡°íšŒ",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('ìˆ˜ê°• ìƒì„¸ ì •ë³´ ì¡°íšŒ ì„±ê³µ', () => {",
                  "    pm.expect(pm.response.code).to.eql(200);",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('id');",
                  "    pm.expect(response).to.have.property('lectures');",
                  "    pm.expect(response.lectures).to.be.an('array');",
                  "    if (response.lectures.length > 0) {",
                  "        pm.expect(response.lectures[0]).to.have.property('status');",
                  "        pm.expect(response.lectures[0]).to.have.property('order');",
                  "    }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-User-Id",
                "value": "{{userId1}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/enrollments/{{enrollmentId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "enrollments", "{{enrollmentId}}"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "4. í†µê³„ ê¸°ëŠ¥",
      "item": [
        {
          "name": "ì»¤ë¦¬í˜ëŸ¼ë³„ ìˆ˜ê°•ì ìˆ˜ ì¡°íšŒ",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('ìˆ˜ê°•ì ìˆ˜ ì¡°íšŒ ì„±ê³µ', () => {",
                  "    pm.expect(pm.response.code).to.eql(200);",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('curriculumId');",
                  "    pm.expect(response).to.have.property('enrollmentCount');",
                  "    pm.expect(response.enrollmentCount).to.be.a('number');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/enrollments/curriculum/{{curriculumId}}/count",
              "host": ["{{baseUrl}}"],
              "path": [
                "api",
                "enrollments",
                "curriculum",
                "{{curriculumId}}",
                "count"
              ]
            }
          },
          "response": []
        },
        {
          "name": "ì»¤ë¦¬í˜ëŸ¼ë³„ ì™„ë£Œì ìˆ˜ ì¡°íšŒ",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('ì™„ë£Œì ìˆ˜ ì¡°íšŒ ì„±ê³µ', () => {",
                  "    pm.expect(pm.response.code).to.eql(200);",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('curriculumId');",
                  "    pm.expect(response).to.have.property('completedCount');",
                  "    pm.expect(response.completedCount).to.be.a('number');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/enrollments/curriculum/{{curriculumId}}/completed-count",
              "host": ["{{baseUrl}}"],
              "path": [
                "api",
                "enrollments",
                "curriculum",
                "{{curriculumId}}",
                "completed-count"
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "5. ê¶Œí•œ ì²´í¬",
      "item": [
        {
          "name": "ë‹¤ë¥¸ ì‚¬ìš©ì ìˆ˜ê°• ëª©ë¡ ì¡°íšŒ ì‹œë„ (ì‹¤íŒ¨)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('ê¶Œí•œ ì—†ìŒ - 403 Forbidden', () => {",
                  "    pm.expect(pm.response.code).to.eql(403);",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.error).to.include('ë³¸ì¸ì˜ ìˆ˜ê°• ëª©ë¡ë§Œ');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-User-Id",
                "value": "{{userId1}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/enrollments/user/{{userId2}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "enrollments", "user", "{{userId2}}"]
            }
          },
          "response": []
        },
        {
          "name": "X-User-Id í—¤ë” ì—†ì´ ìš”ì²­ (ì‹¤íŒ¨)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('í—¤ë” ì—†ìŒ - 400 Bad Request', () => {",
                  "    pm.expect(pm.response.code).to.eql(400);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/enrollments/user/{{userId1}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "enrollments", "user", "{{userId1}}"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "6. ì—ëŸ¬ ì¼€ì´ìŠ¤",
      "item": [
        {
          "name": "ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì»¤ë¦¬í˜ëŸ¼ ìˆ˜ê°• ì‹ ì²­ (ì‹¤íŒ¨)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì»¤ë¦¬í˜ëŸ¼ - 400 Bad Request', () => {",
                  "    pm.expect(pm.response.code).to.eql(400);",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.error).to.include('ì»¤ë¦¬í˜ëŸ¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "X-User-Id",
                "value": "{{userId1}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"curriculumId\": 99999\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/enrollments",
              "host": ["{{baseUrl}}"],
              "path": ["api", "enrollments"]
            }
          },
          "response": []
        },
        {
          "name": "ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ìˆ˜ê°• ì •ë³´ ì¡°íšŒ (ì‹¤íŒ¨)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ìˆ˜ê°• ì •ë³´ - 404 Not Found', () => {",
                  "    pm.expect(pm.response.code).to.eql(404);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-User-Id",
                "value": "{{userId1}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/enrollments/99999",
              "host": ["{{baseUrl}}"],
              "path": ["api", "enrollments", "99999"]
            }
          },
          "response": []
        }
      ]
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// í™˜ê²½ ë³€ìˆ˜ ì´ˆê¸°í™” (í•„ìš”ì‹œ)",
          "if (!pm.environment.get('baseUrl')) {",
          "    pm.environment.set('baseUrl', 'http://localhost:2358');",
          "}",
          "",
          "// í…ŒìŠ¤íŠ¸ìš© ì‚¬ìš©ì ID ì„¤ì • (ì‹¤ì œ ê°’ìœ¼ë¡œ ë³€ê²½ í•„ìš”)",
          "if (!pm.environment.get('userId1')) {",
          "    pm.environment.set('userId1', '1');",
          "}",
          "if (!pm.environment.get('userId2')) {",
          "    pm.environment.set('userId2', '2');",
          "}",
          "",
          "// í…ŒìŠ¤íŠ¸ìš© ì»¤ë¦¬í˜ëŸ¼ ID ì„¤ì • (ì‹¤ì œ ê°’ìœ¼ë¡œ ë³€ê²½ í•„ìš”)",
          "if (!pm.environment.get('curriculumId')) {",
          "    pm.environment.set('curriculumId', '1');",
          "}",
          "",
          "// í…ŒìŠ¤íŠ¸ìš© ê°•ì˜ ID ì„¤ì • (ì‹¤ì œ ê°’ìœ¼ë¡œ ë³€ê²½ í•„ìš”)",
          "if (!pm.environment.get('markdownLectureId')) {",
          "    pm.environment.set('markdownLectureId', '1');",
          "}",
          "if (!pm.environment.get('problemLectureId')) {",
          "    pm.environment.set('problemLectureId', '2');",
          "}"
        ]
      }
    }
  ],
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:2358",
      "type": "string"
    }
  ]
}
